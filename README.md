test-report-volga-med
=====================

Необходимо выполнить:

0. Зарегистрироваться на сейте https://github.com 

1. Зделать ответвление(fork) репозитария https://github.com/TheBatya/test-report-volga-med
   Репозитарий имеет следующую структуру
   \reports - проект отчетов
   \script\sql - папка скриптов, в которой лежит хранимая процедура, требующая изменений
                 в дальнейшем.
   \documentation - папка с документацией, по использованию git и структура нашей БД. 
2. Забрать по адресу http://yadi.sk/d/Xvpo3UGmL9JKa и развернуть из резервной копии архив базы.

3. Работать в дальнейшем с собственным репозитарием, и все изменение производить в нем.

4. Изменить отчет и хранимую процедуру, согласно заданию.

5. После изменения отчета и хранимой процедуры, сохранить их в соответствующих папках.

6. После всех изменений, закоммитить все изменения в свой репозитарий и сделать запрос на добавление в оригинальный (pull request).

ЗАДАНИЕ:
------------------------------------------------------------

Отчет - "Отпуск в отделение". Изменить отчет, добавиви возможность указать вид деятельности
в качестве параметра.
Нужно добавить возможность формирования как по определенному виду деятельности так и по всем.

Примечание:
Вид деятельности - это тип источника финансирования(страхование, бюджет и т.д.), который указывается при приходовании документа.
Приходные документы это таблица rprihod, ссылка на виды деятельности это поле rprihodvid_dejat указанной таблицы.
У каждой таблицы перемещения(на основе которых надо делать отчет) есть ссылка на приходный документ, через 
который и можно фильтровать документы по виду деятельности. 
Таблица перемещения rperem Таблица состава перемещения - rsost_perem. Ссылка на приход поле rsost_peremprih
Таблица с видом деятельности - это таблица rvid_dejat.

--------------------------------------------------------------

Более подробное описание можно прочитать в структуре БД.


Примечание по структуре:
 
Структура базы данных
Вся структура описана файлом в формате Excel.
Описание файла структуры

Наименования на русском языке - это описание таблицы
Мнемокод - это название таблицы или поля
Тип - тип задается для полей
        B – булевый
        S(K) - строка с размером K
        N(K) - целочисленное с занимаемой памятью в K байт
        N(K,L) - с плавающей точкой размером в K до запятой и после запятой
        D - дата и время
        M – денежный
        RR(T) - ссылка на таблицу T
        RRP(T) - зависимый элемент от таблицы T
        
Каждая таблица имеет имя в базе данных оно составляется так «dbo.r»+«мнемокод», и
как минимум два поля «dbo.r»+«мнемокод»+«ID» идентификатор записи, первичный ключ и 
«dbo.r» + «мнемокод»+«Name» (общее имя записи). Например, если в таблице указано 
имя таблицы "pac", то физически таблица в БД будет называться "rpac" и иметь 
кроме указанных еще два обязательных поля: rpacID и rpacName. Кроме того к полям 
также добавляется префикс таблицы. Например поле, в котором хранится фамилия пациента 
фактически называется rpaclast_name. 


 
